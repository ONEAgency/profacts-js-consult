
(function(){window["profactsmodaltemplates"]=window["profactsmodaltemplates"]||{};window["profactsmodaltemplates"]["popup_1"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<link rel="stylesheet" href="http://oneagency.github.io/profacts-js-consult/dist/css/template-styles.css">\n<div class="overlay"></div>\n<div class="modal-box-content">\n  <header>\n    <div class="gradient"></div>\n    <h1>Deel uw mening en win!</h1>\n  </header>\n\n  <section>\n    <p>Als bezoeker aan onze website willen wij graag uw mening weten over Acerta als potentiële werkgever.</p>\n    <p>Deelnemen neemt slecht 10-15 minuten in beslag en alle gegevens blijven volledig vertrouwelijk.</p>\n    <p>Bovendien maakt u dan kans op één van onze fantastische prijzen! </p>\n\n    <div class="buttons tac">\n      <a href="'+
__e(accepturl)+'" class="button button-accept" target="_blank">Ik neem deel</a>\n      <a href="#" class="button button-decline" target="_blank">Nu niet</a>\n    </div>\n\n    <div class="grid-2 mobile">\n      <div class="tac">\n        <img src="http://oneagency.github.io/profacts-js-consult/dist/img/acerta.png" alt="Acerta" class="logo">\n      </div>\n\n      <div class="tac">\n        <img src="http://oneagency.github.io/profacts-js-consult/dist/img/profacts.png" alt="Profacts" class="logo">\n      </div>\n    </div>\n  </section>\n</div>\n';}
return __p}})();!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.ProfactsModal=e()}}(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){exports.defaults={};exports.set=function(name,value,options){var opts=options||{};var defaults=exports.defaults;var expires=opts.expires||defaults.expires;var domain=opts.domain||defaults.domain;var path=opts.path!=undefined?opts.path:(defaults.path!=undefined?defaults.path:'/');var secure=opts.secure!=undefined?opts.secure:defaults.secure;var httponly=opts.httponly!=undefined?opts.httponly:defaults.httponly;var expDate=expires?new Date(typeof expires=='number'?new Date().getTime()+(expires*864e5):expires):'';document.cookie=name.replace(/[^+#$&^`|]/g,encodeURIComponent).replace('(','%28').replace(')','%29')+'='+value.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+
(expDate&&expDate.getTime()>=0?';expires='+expDate.toUTCString():'')+
(domain?';domain='+domain:'')+
(path?';path='+path:'')+
(secure?';secure':'')+
(httponly?';httponly':'');};exports.get=function(name){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i];var cookieLength=cookie.length;var separatorIndex=cookie.indexOf('=');separatorIndex=separatorIndex<0?cookieLength:separatorIndex;if(decodeURIComponent(cookie.substring(0,separatorIndex).replace(/^\s+|\s+$/g,''))==name){return decodeURIComponent(cookie.substring(separatorIndex+1,cookieLength));}}
return null;};exports.erase=function(name,options){exports.set(name,'',{expires:-1,domain:options&&options.domain,path:options&&options.path,secure:0,httponly:0});};},{}],2:[function(_dereq_,module,exports){'use strict';var strictUriEncode=_dereq_('strict-uri-encode');exports.extract=function(str){return str.split('?')[1]||'';};exports.parse=function(str){if(typeof str!=='string'){return{};}
str=str.trim().replace(/^(\?|#|&)/,'');if(!str){return{};}
return str.split('&').reduce(function(ret,param){var parts=param.replace(/\+/g,' ').split('=');var key=parts.shift();var val=parts.length>0?parts.join('='):undefined;key=decodeURIComponent(key);val=val===undefined?null:decodeURIComponent(val);if(!ret.hasOwnProperty(key)){ret[key]=val;}else if(Array.isArray(ret[key])){ret[key].push(val);}else{ret[key]=[ret[key],val];}
return ret;},{});};exports.stringify=function(obj){return obj?Object.keys(obj).sort().map(function(key){var val=obj[key];if(val===undefined){return'';}
if(val===null){return key;}
if(Array.isArray(val)){return val.sort().map(function(val2){return strictUriEncode(key)+'='+strictUriEncode(val2);}).join('&');}
return strictUriEncode(key)+'='+strictUriEncode(val);}).filter(function(x){return x.length>0;}).join('&'):'';};},{"strict-uri-encode":3}],3:[function(_dereq_,module,exports){'use strict';module.exports=function(str){return encodeURIComponent(str).replace(/[!'()*]/g,function(c){return'%'+c.charCodeAt(0).toString(16);});};},{}],4:[function(_dereq_,module,exports){var ProfactsModal,cookies,queryString,src;queryString=_dereq_("query-string");cookies=_dereq_("browser-cookies");src=document.getElementById('profacts-modal').src.split(".js")[1];module.exports=ProfactsModal=(function(){function ProfactsModal(options){var ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7;this.startdate=(ref=options.startdate)!=null?ref:"2015-01-01T0:00:01",this.enddate=(ref1=options.enddate)!=null?ref1:"2016-01-01T0:00:01",this.showratio=(ref2=options.showratio)!=null?ref2:100,this.expireratio=(ref3=options.expireratio)!=null?ref3:0,this.hideafteraccept=(ref4=options.hideafteraccept)!=null?ref4:false,this.campaignkey=(ref5=options.campaignkey)!=null?ref5:"profactscampaign",this.templategroupname=(ref6=options.templategroupname)!=null?ref6:"profactsmodaltemplates",this.templatename=(ref7=options.templatename)!=null?ref7:"popup_1";}
ProfactsModal.prototype.init=function(){this.handleRequestParams();this.inrange=this.checkDate(this.getRequestParram("startdate"),this.getRequestParram("enddate"));if(this.inrange){this.makePopup();this.shouldshowbyratio=this.checkShowRatio(this.getRequestParram("showratio"));if(this.shouldshowbyratio){if(!(cookies.get((this.getRequestParram("campaignkey"))+"_expire")||cookies.get((this.getRequestParram("campaignkey"))+"_accepted"))){this.showPopup();return this.attachEvents();}}}};ProfactsModal.prototype.getTemplate=function(){return this.template=window[this.getRequestParram("templategroupname")][this.getRequestParram("templatename")];};ProfactsModal.prototype.makePopup=function(){var template;template=this.getTemplate();this.wrapper=document.createElement("div");this.wrapper.id="modal-wrapper";this.wrapper.innerHTML=this.template({accepturl:this.getRequestParram("accepturl")});return document.body.appendChild(this.wrapper);};ProfactsModal.prototype.showPopup=function(){this.makeExpireCookie(this.getRequestParram("expireratio"));setTimeout(function(){return document.querySelector('#modal-wrapper').classList.add("added");},500);return setTimeout(function(){return document.querySelector('#modal-wrapper').classList.add("shown");},1000);};ProfactsModal.prototype.hidePopup=function(){setTimeout(function(){return document.querySelector('#modal-wrapper').classList.remove("shown");},500);return setTimeout(function(){return document.querySelector('#modal-wrapper').classList.remove("added");},1000);};ProfactsModal.prototype.attachEvents=function(){document.querySelector('#modal-wrapper .overlay').addEventListener('click',(function(_this){return function(){if(document.querySelector('#modal-wrapper').classList.contains('shown')){return _this.hidePopup();}};})(this));document.querySelector('#modal-wrapper .button-accept').addEventListener('click',(function(_this){return function(){if(document.querySelector('#modal-wrapper').classList.contains('shown')){cookies.set((_this.getRequestParram("campaignkey"))+"_accepted","true",{expires:_this.addHours(new Date(_this.getRequestParram("enddate")),_this.getTimeZone())});if(_this.getRequestParram("hideafteraccept")==="true"){return _this.hidePopup();}}};})(this));return document.querySelector('#modal-wrapper .button-decline').addEventListener('click',(function(_this){return function(){if(document.querySelector('#modal-wrapper').classList.contains('shown')){return _this.hidePopup();}};})(this));};ProfactsModal.prototype.makeExpireCookie=function(expireratio){var addfunc,nowPlusRatio;addfunc=this.minutesOrHours(expireratio);nowPlusRatio=addfunc(new Date(),parseInt(expireratio,10));return cookies.set((this.getRequestParram("campaignkey"))+"_expire","true",{expires:nowPlusRatio});};ProfactsModal.prototype.checkDate=function(start,end){var endDate,now,startDate;startDate=this.addHours(new Date(start),this.getTimeZone()).getTime();now=new Date().getTime();endDate=this.addHours(new Date(end),this.getTimeZone()).getTime();if((startDate<now&&now<endDate)){return true;}else{return false;}};ProfactsModal.prototype.checkShowRatio=function(r){var random;random=Math.round(Math.random()*100);if(random<=r){return true;}else{return false;}};ProfactsModal.prototype.minutesOrHours=function(s){s=s.toString();if(s.indexOf("m")>-1){return this.addMinutes;}
if(s.indexOf("h")>-1){return this.addHours;}
return this.addHours;};ProfactsModal.prototype.addHours=function(d,h){d.setHours(d.getHours()+h);return d;};ProfactsModal.prototype.addMinutes=function(d,m){d.setMinutes(d.getMinutes()+m);return d;};ProfactsModal.prototype.getTimeZone=function(){return-new Date().getTimezoneOffset()/60;};ProfactsModal.prototype.getRequestParram=function(key){if(this.reqparams[key]==null){if(key==="campaignkey"&&this[key]==="profactscampaign"){console.log("WARNING: every campaign should have a campaignkey. This key is used to create the modal cookies.");}
if(key==="accepturl"){console.log("WARNING: You must provide a encoded accepturl.");}
return this[key];}else{return this.reqparams[key];}};ProfactsModal.prototype.handleRequestParams=function(){return this.reqparams=queryString.parse(src);};return ProfactsModal;})();},{"browser-cookies":1,"query-string":2}]},{},[4])
(4)});(function(){var modal;modal=new ProfactsModal({});modal.init();}).call(this);